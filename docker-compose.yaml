version: "3.9"
services:

  verum_backend:
    build: 
      context: ./
      dockerfile: Dockerfile-backend
    container_name: ${BACKEND_NAME}
    ports:
      - 92:8081

  verum_database:
    environment:
      MONGO_INITDB_DATABASE: admin
      MONGO_INITDB_ROOT_USERNAME: ${MONGO_USER}
      MONGO_INITDB_ROOT_PASSWORD: ${MONGO_PASS}
    image: mongo:${MONGO_VER}
    container_name: ${DATABASE_NAME}
    working_dir: ${WORKDIR}
    volumes:
      - ./database/config/init-mongo.js:/docker-entrypoint-initdb.d/init-mongo.js
      - ${INTERNAL_STORAGE}:${EXTERNAL_STORAGE}
    ports:
      - 91:27017

  verum_frontend:
    build: 
      context: ./
      dockerfile: Dockerfile-frontend
    container_name: ${FRONTEND_NAME}
    ports: 
      - 90:80
